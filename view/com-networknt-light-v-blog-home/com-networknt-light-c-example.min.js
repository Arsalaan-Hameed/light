angular.module("lightApp").run(["$templateCache",function(t){t.put("tpl/blogHome.html",'<div class="container" data-ng-controller="BlogCtrl"><div class="row"><div class="col-md-12"><div class="pull-right" ng-if="global.isLogin"><button class="btn btn-info" ng-click="post()"><i class="glyphicon glyphicon-edit"></i>Post</button></div><tabset><tab heading="Recent"><h1>Blog</h1><ul class="media-list"><li class="media" ng-repeat="blog in blogs"><div class="media-body"><div class="media-header"><a ng-href="{{$index}}"><i class="primary"></i><h4>{{blog.title}}</h4></a></div><div class="media-content list-content" marked="blog.summary"></div><div class="media-footer"><a ng-href="{{blog.createUserRid}}"><i class="fa fa-pencil success"></i>{{blog.createUserId}}</a> <i class="fa fa-clock-o">{{blog.createDate | formatDate}}</i> <i class="fa fa-refresh">{{blog.updateDate | formatDate}}</i> <i class="fa fa-comments-o" title="comments" ng-show="blog.comments">{{blog.comments}}</i> <a ng-repeat="tag in article.tagsList" ng-href="{{\'/\'+tag._id}}" class="pure-button pure-button-link">{{tag.tag}}</a></div></div></li></ul><pagination total-items="page.totalItems" items-per-page="getBlog.data.pageSize" ng-model="getBlog.data.pageNo" max-size="page.maxSize" class="pagination-sm" boundary-links="true" rotate="false" num-pages="page.numPages" ng-change="pageChanged()"></pagination><table><tr><td>Page: {{getBlog.data.pageNo}} / {{page.numPages}}</td><td>&nbsp;</td><td>Page Size:</td><td><input type="number" min="1" max="100" ng-change="filterResult()" ng-model="getBlog.data.pageSize"></td></tr></table></tab><tab heading="Hot"><div>This is tab hot</div></tab><tab heading="Updated"><div>This is tab updated</div></tab><tab heading="My posts" ng-if="global.isLogin"><div>This is tab my posts</div></tab></tabset></div></div></div>')}]),function(t){"use strict";t.module("lightApp").controller("BlogCtrl",function(a,e,o,i,l){a.getBlog={category:"blog",name:"getBlog",readOnly:!0,data:{pageSize:10,pageNo:1,sortDir:"desc",sortedBy:"createdDate"}},a.displayMode="Summary",a.page={maxSize:5,totalItems:0,numPages:0},a.blogs=[],a.post=function(e){if(console.log(e),t.isDefined(e)){var i=a.blogs[e];l.setModelData(i)}o.path("/form/com.networknt.light.blog.post")},a.fetchResult=function(){e.post("api/rs",a.getBlog).success(function(t){a.blogs=t.blogs,a.page.totalItems=t.total,console.log(a.blogs),console.log(a.page.totalItems),a.page.numPages=Math.ceil(a.page.totalItems/a.getBlog.data.pageSize)}).error(function(){console.log("enter error!!!")})},a.onSort=function(t,e){a.getBlog.data.sortDir=e,a.getBlog.data.sortedBy=t,a.getBlog.data.pageNo=1,a.fetchResult()},a.filterResult=function(){a.getBlog.data.pageNo=1,a.fetchResult()},a.pageChanged=function(){a.fetchResult()},a.toggleDisplayMode=function(){a.displayMode="Summary"===a.displayMode?"Detail":"Summary"},a.isDetailMode=function(){return"Detail"===a.displayMode},a.pageChanged()})}(window.angular);